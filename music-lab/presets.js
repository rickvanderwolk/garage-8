/**
 * Presets - Pre-defined patterns for different genres
 * Each preset specifies instruments per channel and patterns
 */

const PRESETS = {
    'house-1': {
        name: 'House 1',
        bpm: 125,
        instruments: [
            { name: 'kick', displayName: 'Kick' },
            { name: 'clap', displayName: 'Clap' },
            { name: 'hihat', displayName: 'Hi-Hat' },
            { name: 'openhat', displayName: 'Open HH' },
            { name: 'stab', displayName: 'Stab' },
            { name: 'bass', displayName: 'Bass' },
            { name: 'perc', displayName: 'Shaker' },
            { name: 'crash', displayName: 'Crash' }
        ],
        patterns: [
            // Pattern A - Classic House
            [
                [1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Clap
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,0,1,0], // Hi-Hat
                [0,0,0,0, 0,0,1,0, 0,0,0,0, 0,0,1,0], // Open HH
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Stab
                [1,0,0,0, 0,0,1,0, 0,0,0,0, 1,0,0,0], // Bass
                [0,0,1,0, 0,0,0,1, 0,0,1,0, 0,0,0,1], // Shaker
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern B - Variation
            [
                [1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,1], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Clap
                [1,1,1,1, 1,1,1,1, 1,1,1,1, 1,1,1,1], // Hi-Hat
                [0,0,0,1, 0,0,0,1, 0,0,0,1, 0,0,0,0], // Open HH
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Stab
                [1,0,0,0, 0,0,1,0, 1,0,0,0, 1,0,0,0], // Bass
                [0,0,1,0, 0,0,1,0, 0,0,1,0, 0,0,1,0], // Shaker
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern C - Breakdown
            [
                [1,0,0,0, 0,0,0,0, 1,0,0,0, 0,0,0,0], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Clap
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,0,1,0], // Hi-Hat
                [0,0,0,0, 0,0,1,0, 0,0,0,0, 0,0,1,0], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Stab
                [1,0,0,0, 0,0,0,0, 1,0,0,0, 0,0,0,0], // Bass
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Shaker
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern D - Build
            [
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,1,1,1], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,1,1,1], // Clap
                [1,1,1,1, 1,1,1,1, 1,1,1,1, 1,1,1,1], // Hi-Hat
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Open HH
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,1,1,1], // Stab
                [1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0], // Bass
                [1,1,1,1, 1,1,1,1, 1,1,1,1, 1,1,1,1], // Shaker
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,1], // Crash
            ]
        ]
    },

    'house-2': {
        name: 'House 2',
        bpm: 128,
        instruments: [
            { name: 'kick', displayName: 'Kick' },
            { name: 'rimshot', displayName: 'Rimshot' },
            { name: 'hihat', displayName: 'Hi-Hat' },
            { name: 'openhat', displayName: 'Open HH' },
            { name: 'pluck', displayName: 'Pluck' },
            { name: 'sub-bass', displayName: 'Sub Bass' },
            { name: 'perc', displayName: 'Perc' },
            { name: 'cowbell', displayName: 'Cowbell' }
        ],
        patterns: [
            // Pattern A - Deep House
            [
                [1,0,0,0, 0,0,1,0, 0,1,0,0, 0,0,1,0], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Rimshot
                [1,0,1,1, 1,0,1,1, 1,0,1,1, 1,0,1,1], // Hi-Hat
                [0,1,0,0, 0,1,0,0, 0,1,0,0, 0,1,0,0], // Open HH
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Pluck
                [1,0,0,0, 0,0,1,0, 0,1,0,0, 0,0,1,0], // Sub Bass
                [0,0,0,1, 0,0,0,1, 0,0,0,1, 0,0,0,1], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Cowbell
            ],
            // Pattern B
            [
                [1,0,0,0, 1,0,1,0, 1,0,0,0, 1,0,1,0], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Rimshot
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,0,1,0], // Hi-Hat
                [0,0,0,1, 0,0,0,1, 0,0,0,1, 0,0,0,0], // Open HH
                [1,0,0,0, 0,0,1,0, 0,0,0,0, 0,0,1,0], // Pluck
                [1,0,0,0, 1,0,1,0, 1,0,0,0, 1,0,1,0], // Sub Bass
                [0,1,0,1, 0,1,0,1, 0,1,0,1, 0,1,0,1], // Perc
                [0,0,0,0, 0,0,1,0, 0,0,0,0, 0,0,1,0], // Cowbell
            ],
            // Pattern C & D - Empty
            [
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
            ],
            [
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
            ]
        ]
    },

    'techno': {
        name: 'Techno',
        bpm: 135,
        instruments: [
            { name: 'hard-kick', displayName: 'Hard Kick' },
            { name: 'clap', displayName: 'Clap' },
            { name: 'hihat', displayName: 'Hi-Hat' },
            { name: 'openhat', displayName: 'Open HH' },
            { name: 'tom', displayName: 'Tom' },
            { name: 'acid-bass', displayName: 'Acid Bass' },
            { name: 'perc', displayName: 'Perc' },
            { name: 'crash', displayName: 'Crash' }
        ],
        patterns: [
            // Pattern A - Hard Techno
            [
                [1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0], // Hard Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Clap
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,0,1,0], // Hi-Hat
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Open HH
                [0,0,0,1, 0,0,0,1, 0,0,0,1, 0,0,0,1], // Tom
                [1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0], // Acid Bass
                [1,1,1,1, 1,1,1,1, 1,1,1,1, 1,1,1,1], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern B - Minimal
            [
                [1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0], // Hard Kick
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Clap
                [0,0,1,0, 0,0,1,0, 0,0,1,0, 0,0,1,0], // Hi-Hat
                [0,0,0,1, 0,0,0,1, 0,0,0,1, 0,0,0,1], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Tom
                [1,0,0,0, 1,0,0,0, 1,0,0,0, 1,0,0,0], // Acid Bass
                [0,0,1,0, 0,0,0,0, 0,0,1,0, 0,0,0,0], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern C - Industrial
            [
                [1,0,0,1, 1,0,0,1, 1,0,0,1, 1,0,0,1], // Hard Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Clap
                [1,1,0,1, 1,1,0,1, 1,1,0,1, 1,1,0,1], // Hi-Hat
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Open HH
                [0,0,0,0, 0,0,0,0, 1,0,0,0, 1,0,0,0], // Tom
                [1,0,0,1, 1,0,0,1, 1,0,0,1, 1,0,0,1], // Acid Bass
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,0,1,0], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern D
            [
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,0,1,0], // Hard Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Clap
                [1,1,1,1, 1,1,1,1, 1,1,1,1, 1,1,1,1], // Hi-Hat
                [0,0,0,0, 0,0,1,0, 0,0,0,0, 0,0,1,0], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Tom
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,0,1,0], // Acid Bass
                [0,1,0,1, 0,1,0,1, 0,1,0,1, 0,1,0,1], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,1], // Crash
            ]
        ]
    },

    'hip-hop': {
        name: 'Hip Hop',
        bpm: 90,
        instruments: [
            { name: '808-kick', displayName: '808 Kick' },
            { name: 'punchy-snare', displayName: 'Snare' },
            { name: 'hihat', displayName: 'Hi-Hat' },
            { name: 'openhat', displayName: 'Open HH' },
            { name: 'rimshot', displayName: 'Rimshot' },
            { name: 'sub-bass', displayName: '808 Bass' },
            { name: 'perc', displayName: 'Perc' },
            { name: 'crash', displayName: 'Crash' }
        ],
        patterns: [
            // Pattern A - Boom Bap
            [
                [1,0,0,0, 0,0,1,0, 0,0,0,0, 0,1,0,0], // 808 Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Snare
                [1,0,1,0, 1,0,1,0, 1,0,1,0, 1,0,1,0], // Hi-Hat
                [0,0,0,1, 0,0,0,0, 0,0,0,1, 0,0,0,0], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Rimshot
                [1,0,0,0, 0,0,1,0, 0,0,0,0, 0,1,0,0], // 808 Bass
                [0,0,0,0, 0,0,0,0, 1,0,0,0, 0,0,0,0], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern B - Trap-ish
            [
                [1,0,0,0, 0,0,1,0, 0,1,0,0, 0,0,1,0], // 808 Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Snare
                [1,0,1,1, 1,0,1,1, 1,0,1,1, 1,0,1,1], // Hi-Hat
                [0,0,0,0, 0,0,0,1, 0,0,0,0, 0,0,0,1], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Rimshot
                [1,0,0,0, 0,0,1,0, 0,1,0,0, 0,0,1,0], // 808 Bass
                [0,0,0,1, 0,0,0,1, 0,0,0,1, 0,0,0,1], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern C
            [
                [1,0,0,0, 0,1,0,0, 1,0,0,0, 0,0,1,0], // 808 Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Snare
                [0,1,0,1, 0,1,0,1, 0,1,0,1, 0,1,0,1], // Hi-Hat
                [0,0,1,0, 0,0,1,0, 0,0,1,0, 0,0,1,0], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Rimshot
                [1,0,0,0, 0,1,0,0, 1,0,0,0, 0,0,1,0], // 808 Bass
                [0,0,0,0, 0,0,0,0, 0,0,1,0, 0,0,0,0], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern D
            [
                [1,0,0,0, 0,0,0,0, 1,0,0,0, 0,0,0,0], // 808 Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Snare
                [1,1,1,1, 1,1,1,1, 1,1,1,1, 1,1,1,1], // Hi-Hat
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Open HH
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Rimshot
                [1,0,0,0, 0,0,0,0, 1,0,0,0, 0,0,0,0], // 808 Bass
                [0,1,0,0, 0,1,0,0, 0,1,0,0, 0,1,0,0], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ]
        ]
    },

    'dnb': {
        name: 'Drum & Bass',
        bpm: 174,
        instruments: [
            { name: 'kick', displayName: 'Kick' },
            { name: 'snare', displayName: 'Snare' },
            { name: 'hihat', displayName: 'Hi-Hat' },
            { name: 'openhat', displayName: 'Open HH' },
            { name: 'tom', displayName: 'Tom' },
            { name: 'reese-bass', displayName: 'Reese Bass' },
            { name: 'perc', displayName: 'Perc' },
            { name: 'crash', displayName: 'Crash' }
        ],
        patterns: [
            // Pattern A - Classic DnB
            [
                [1,0,0,0, 0,0,0,0, 0,0,1,0, 0,0,0,0], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Snare
                [1,1,1,1, 1,1,1,1, 1,1,1,1, 1,1,1,1], // Hi-Hat
                [0,0,0,1, 0,0,0,0, 0,0,0,1, 0,0,0,0], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Tom
                [1,0,0,0, 0,0,1,1, 0,0,1,0, 0,1,0,0], // Reese Bass
                [0,0,1,0, 0,0,1,0, 0,0,1,0, 0,0,1,0], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern B - Jungle
            [
                [1,0,0,0, 0,0,1,0, 0,0,0,0, 1,0,0,0], // Kick
                [0,0,0,0, 1,0,0,1, 0,0,0,0, 1,0,1,0], // Snare
                [1,0,1,1, 1,0,1,1, 1,0,1,1, 1,0,1,1], // Hi-Hat
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,1,0, 0,0,0,0], // Tom
                [1,0,1,0, 0,0,1,0, 1,0,0,0, 1,0,0,0], // Reese Bass
                [1,1,0,1, 1,1,0,1, 1,1,0,1, 1,1,0,1], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern C
            [
                [1,0,0,0, 0,0,0,0, 0,0,1,0, 0,0,0,0], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,0, 1,0,0,0], // Snare
                [1,1,1,1, 1,1,1,1, 1,1,1,1, 1,1,1,1], // Hi-Hat
                [0,0,0,0, 0,0,0,1, 0,0,0,0, 0,0,0,1], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Tom
                [1,0,0,0, 0,0,1,1, 0,0,1,0, 0,1,0,0], // Reese Bass
                [0,0,1,0, 0,0,0,0, 0,0,1,0, 0,0,0,0], // Perc
                [1,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern D - Empty
            [
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
            ]
        ]
    },

    'breakbeat': {
        name: 'Breakbeat',
        bpm: 140,
        instruments: [
            { name: 'kick', displayName: 'Kick' },
            { name: 'snare', displayName: 'Snare' },
            { name: 'hihat', displayName: 'Hi-Hat' },
            { name: 'openhat', displayName: 'Open HH' },
            { name: 'tom', displayName: 'Tom' },
            { name: 'bass', displayName: 'Bass' },
            { name: 'perc', displayName: 'Perc' },
            { name: 'crash', displayName: 'Crash' }
        ],
        patterns: [
            // Pattern A
            [
                [1,0,0,0, 0,0,1,0, 0,1,0,0, 0,0,0,0], // Kick
                [0,0,0,0, 1,0,0,0, 0,0,0,1, 1,0,0,0], // Snare
                [1,0,1,1, 1,0,1,0, 1,0,1,1, 1,0,1,0], // Hi-Hat
                [0,1,0,0, 0,1,0,1, 0,1,0,0, 0,1,0,1], // Open HH
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,1], // Tom
                [1,0,0,0, 0,0,1,0, 0,1,0,0, 0,0,0,0], // Bass
                [0,0,1,0, 0,0,0,0, 0,0,1,0, 0,0,0,0], // Perc
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0], // Crash
            ],
            // Pattern B-D - Empty
            [
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
            ],
            [
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
            ],
            [
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
                [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0],
            ]
        ]
    }
};

/**
 * Load preset into sequencer
 */
function loadPreset(presetId) {
    const preset = PRESETS[presetId];
    if (!preset) return false;

    // Set BPM
    sequencer.setBPM(preset.bpm);

    // Set instruments per track
    if (preset.instruments) {
        preset.instruments.forEach((inst, trackIndex) => {
            sequencer.setTrackInstrument(trackIndex, inst.name, inst.displayName);
        });
    }

    // Load all patterns
    preset.patterns.forEach((pattern, patternIndex) => {
        // Pattern is now an array of 8 tracks (each track is an array of 16 steps)
        pattern.forEach((trackData, trackIndex) => {
            trackData.forEach((value, step) => {
                sequencer.setNote(trackIndex, step, value === 1, patternIndex);
            });
        });
    });

    return true;
}

/**
 * Get all preset options for UI
 */
function getPresetOptions() {
    return Object.keys(PRESETS).map(id => ({
        id: id,
        name: PRESETS[id].name
    }));
}
